trigger:
- main
variables:
 buildConfiguration: 'Release'
stages:
  - stage: Build
    jobs:
      - job: Fortend
        pool:
          vmImage: ubuntu-latest
        steps:
        - task: NodeTool@0
          inputs:
            versionSpec: '16.x'
        
      - job: backend
        pool:
          vmImage: ubuntu-latest
        steps:
        - task: NuGetToolInstaller@1
          displayName: 'NuGet Tool'
          inputs:
            versionSpec: 
        - task: NuGetCommand@2
          displayName: 'NuGet Restore'
          inputs:
            command: 'restore'
            restoreSolution: '**/*.sln'
        - task: DotNetCoreCLI@2
          displayName: 'Dotnet Restore'
          inputs:
            command: 'build'
            projects: '**/*.sln'
        - task: DotNetCoreCLI@2
          displayName: 'Dotnet Build'
          inputs:
            command: 'build'
            projects: '**/*.sln'
            arguments: '--no-restore --configuration Release'
        - task: CopyFiles@2
          inputs:
            Contents: '**'
            TargetFolder: '$(Build.ArtifactStagingDirectory)'
        - task: PublishBuildArtifacts@1
          inputs:
            PathtoPublish: '$(Build.ArtifactStagingDirectory)'
            ArtifactName: 'drop'
            publishLocation: 'Container'
      
        